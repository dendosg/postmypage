{"remainingRequest":"/home/dendo/CODING/postmypage/node_modules/@angular-devkit/build-optimizer/src/build-optimizer/webpack-loader.js??ref--3-1!/home/dendo/CODING/postmypage/node_modules/ng2-imgur-uploader/lib/ng2-imgur-uploader.js","dependencies":[{"path":"/home/dendo/CODING/postmypage/node_modules/ng2-imgur-uploader/lib/ng2-imgur-uploader.js","mtime":1479886660000},{"path":"/home/dendo/CODING/postmypage/node_modules/cache-loader/dist/cjs.js","mtime":1562770612135},{"path":"/home/dendo/CODING/postmypage/node_modules/@angular-devkit/build-optimizer/src/build-optimizer/webpack-loader.js","mtime":1519266497000}],"contextDependencies":[],"result":["\"use strict\";\nvar core_1 = require('@angular/core');\nvar http_1 = require('@angular/http');\nvar rxjs_1 = require('rxjs');\nvar util_1 = require('./util');\nvar Ng2ImgurUploader = /*@__PURE__*/ (function () {\n    function Ng2ImgurUploader(http) {\n        this.http = http;\n    }\n    Ng2ImgurUploader.prototype.upload = function (uploadOptions) {\n        var _this = this;\n        var result = new rxjs_1.Subject();\n        util_1.FileReaderUtils.imageDataToBase64(uploadOptions.imageData)\n            .subscribe(function (imageBase64) {\n            _this.sendImgurRequest(imageBase64, uploadOptions, result);\n        }, function (error) {\n            result.error(error);\n        });\n        return result;\n    };\n    Ng2ImgurUploader.prototype.delete = function (clientId, deleteHash) {\n        var options = this.buildRequestOptions(clientId);\n        return this.http.delete(\"https://api.imgur.com/3/image/\" + deleteHash, options)\n            .map(function (res) { return res.text(); });\n    };\n    Ng2ImgurUploader.prototype.buildRequestOptions = function (clientId) {\n        var headers = new http_1.Headers({\n            Authorization: 'Client-ID ' + clientId,\n            Accept: 'application/json'\n        });\n        return new http_1.RequestOptions({ headers: headers });\n    };\n    Ng2ImgurUploader.prototype.sendImgurRequest = function (imageBase64, uploadOptions, result) {\n        var options = this.buildRequestOptions(uploadOptions.clientId);\n        var body = {\n            image: imageBase64,\n            title: uploadOptions.title,\n            type: 'base64'\n        };\n        this.http.post('https://api.imgur.com/3/image', body, options)\n            .subscribe(function (res) {\n            var responseData = res.json().data;\n            result.next({\n                data: {\n                    link: responseData.link,\n                    deleteHash: responseData.deletehash\n                },\n                success: true\n            });\n            result.complete();\n        }, function (err) {\n            result.error('error uploading image: ' + err.text());\n        });\n        return result;\n    };\n    Ng2ImgurUploader.decorators = [\n        { type: core_1.Injectable },\n    ];\n    /** @nocollapse */\n    Ng2ImgurUploader.ctorParameters = [\n        { type: http_1.Http, },\n    ];\n    return Ng2ImgurUploader;\n}());\nexports.Ng2ImgurUploader = Ng2ImgurUploader;\n",null]}